{{input class="search-tracks" autofocus="autofocus" value=filterText escape-press=(action 'clearSearch') placeholder="Search podcasts" input=(action "resetPagination")}}
{{#power-select-multiple
    placeholder="Search by tag..."
    options=labelNames
    selected=selectedLabels
    renderInPlace=true
    onchange=(action (mut selectedLabels))
    as |label|
}}
  {{label}}
{{/power-select-multiple}}

{{#podcasts-loader query=searchParams as |loader|}}
  {{#if loader.isRunning}}
    <p>Loading...</p>
  {{else}}
    {{#each loader.data.tracks as |track|}}
      {{podcast-track cdnUrl=track.cdnUrl title=track.title labels=track.labels selectLabel=(action "selectLabel")}}
    {{/each}}
  {{/if}}
{{/podcasts-loader}}

{{#if (gt meta.page 1)}}
  <span class="pagination">{{#link-to "home.podcasts" (query-params page=(dec meta.page))}}«{{/link-to}}</span>
{{/if}}
{{#each (range 1 (inc meta.total_pages)) as |number| }}
  {{#if (eq number meta.page)}}
        {{number}}
      {{else}}
    <span class="pagination">{{link-to number "home.podcasts" (query-params page=number)}}</span>
      {{/if}}
{{/each}}
{{#if (lt meta.page meta.total_pages)}}
        <span class="pagination">{{#link-to "home.podcasts" (query-params page=(inc meta.page))}}»{{/link-to}}</span>
{{/if}}
